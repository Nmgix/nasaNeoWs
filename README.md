## Тестовое задание 'ARMAGGEDON V2' от Kvartirka

### Как запустить

1. Настроить `.env.local` с апи ключом, пример файла

```json
    ASTEROID_URL = http://www.neowsapp.com/rest/v1/neo
    API_KEY = CURRENT_API_KEY

    ASTEROIDS_URL = https://api.nasa.gov/neo/rest/v1

    APOD_URL = https://api.nasa.gov/planetary/apod
```

2. `npm run start` | `npm run dev` для приложения
3. `npm run styles` для перебилда стилей при изменении
4. `npm run test` для cypress тестов

### Что осталось сделать [`39`/`44`]

1. [x] Страницы
   1. [x] Главная страница
      1. [x] Пк версия
      2. [x] Мобильная версия
   2. [x] Страница заказа уничтожения астероидов
      1. [x] Пк версия
      2. [x] Мобильная версия
   3. [x] Страница описания астероида
      1. [x] Пк версия
      2. [x] Мобильная версия
2. [ ] Компоненты
   1. [x] Частоиспользуемые компоненты
      1. [x] Кнопка ( + стилизация под `<a>`)
      2. [x] Чекбокс
      3. [x] ScrollableView
      4. [x] Компонент svg-иконок
         > `<Image>` с svg
      5. [x] Контекст
   2. [x] Шапка
      1. [x] Получение изображения дня
         > не получилось использовать getInitialProps в \_app т.к. после первоначального запроса, при прееходе на другую страницу происходил запрос С фронтенда с несуществующими env
      2. [x] Переключение между астероидами и заказом
   3. [x] Шапка контента
      1. [x] Заголовок
         1. [x] Опциональная дата
      2. [x] Опции
         1. [x] Переключение метрики расстояния (км/лунные орбиты)
         2. [x] Опциональный чекбокс показа только потенциально опасных астероидов
      3. [x] Опциональное использование svg-изображения угрозы астероида
         > Вместо svg используется JSX.Element
   4. [x] Карточка астероида для списка
      1. [x] Использование svg-изображения угрозы астероида
      2. [x] Диаметр астероида
      3. [x] Расстояние до земли в км/лунных орбитах
      4. [x] Опасность астероида
      5. [x] Кнопка добавления/удаления из заказа
   5. [ ] Список астероидов
      1. [x] Список типа "добавить в заказ"
      2. [x] Список типа "удалить из заказа"
      3. [ ] Infinite scroll
   6. [x] Характеристики астероида
   7. [x] Список сближений (ScrollableView)
   8. [x] Футер
3. [x] Карта svg-иконок

   > Нет смысла переусложнять, всего две svg иконки, хороший пример реализации есть в `22bytetestapp-cancelled`, вместо этого использую `<Image>` с svg

4. [ ] Убрать ошибочный лоадер "нет астероидов в ..." когда они не успели подгрузиться
5. [x] Сохранение заказа в localStorage
6. [ ] (?) Docker
7. [ ] Деплой на Vercel

## Комментарии

### Про реалзиацию getAsteroids

`date.toISOString()` может поставить дату не сходящуюся с текущей локально

### Про currentDate в AsteroidsGrid

`-1` от текущего дня необходимо для поулчения астероидов недели исключая последний день прошлой недели

### Про Set в addAsteroid внутри Context Provider

Во время написания кода я столкнулся с тем, что при добавлении астетроида в корзину у меня не менялось его состояние, но в Order дважды могло быть добавлено одно айди

### Про HeaderSecondaryWrapper

При обновлении order в контексте, HeaderSecondary перерендеривался т.к. используется тот-же контекст (либо разделять контекст на несколько, либо мемоизация)

### Про useEffect без зависимостей в контексте

При инициализации стейта у компонента, localStorage является не объявленным

### Про setTimeout в `pages/oreder`

Выбрасывало варнинг `Cannot update a component ('ContextProvider') while rendering a different component ('Order).`
